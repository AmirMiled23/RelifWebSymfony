{% extends 'backoff.html.twig' %}

{% block title %}Event{% endblock %}

{% block body %}
<div style="margin-top: 90px;">
    <h1>Event</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Nom de l'evenement</th>
                <td>{{ event.nomEvent }}</td>
            </tr>
            <tr>
                <th>Date</th>
                <td>{{ event.dateEvent ? event.dateEvent|date('Y-m-d') : '' }}</td>
            </tr>
            <tr>
                <th>Adresse</th>
                <td>{{ event.adresseEvent }}</td>
            </tr>
            <tr>
                <th>La Ville</th>
                <td>{{ event.villes }}</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>{{ event.descriptionEvent }}</td>
            </tr>
            <tr>
                <th>Status</th>
                <td>{{ event.statusEvent }}</td>
            </tr>
            <tr>
                <th>Nombre des participants maximum</th>
                <td>{{ event.nbParticipantMax }}</td>
            </tr>
        </tbody>
    </table>
{% if currentTemp is defined %}
            <div style="background-color: #f8f9fa; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); min-width: 250px; text-align: right;">
                <p><strong>Température :</strong> {{ currentTemp }} °C</p>
                <p><strong>Humidité :</strong> {{ currentHumidity }} %</p>
                <p><strong>Vent :</strong> {{ currentWind }} km/h</p>

                {% set canGoOut = (currentTemp >= 15 and currentTemp <= 28)
                                and (currentHumidity >= 30 and currentHumidity <= 73)
                                and (currentWind <= 30) %}
                {% if canGoOut %}
                    <p style="color: green; font-weight: bold;">✅ Bon temps pour sortir !</p>
                {% else %}
                    <p style="color: red; font-weight: bold;">❌ Pas conseillé de sortir !</p>
                {% endif %}
            </div>
        {% else %}
            <div style="text-align: right; min-width: 250px;">
                <p>Aucune donnée météo disponible.</p>
            </div>
        {% endif %}
   <div class="d-flex gap-2 mt-3">
    <a href="{{ path('app_event_index') }}" class="btn btn-secondary">
        <i class="fas fa-arrow-left me-1"></i> Revenir à la liste
    </a>

    <a href="{{ path('app_event_edit', {'id': event.id_event}) }}" class="btn btn-primary">
        <i class="fas fa-edit me-1"></i> Modifier
    </a>

    <form method="post" action="{{ path('app_event_delete', {'id': event.id_event}) }}" 
          onsubmit="return confirm('Are you sure you want to delete this item?');" style="margin: 0;">
        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ event.id_event) }}">
        <button class="btn btn-danger">
            <i class="fas fa-trash-alt me-1"></i> Supprimer
        </button>
    </form>
</div>


    
</div>
{% endblock %}
